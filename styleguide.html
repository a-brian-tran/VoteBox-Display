<!doctype html>
<html lang=en class="no-js no-touch" itemscope itemtype=http://schema.org/Article>
<head>
    <meta charset=utf-8>
    <meta name=description content="Visual style guide used by this site.">
    <meta http-equiv=X-UA-Compatible content="IE=edge">
    <meta id=viewport name=viewport content="width=device-width, initial-scale=1">
    <meta itemprop=name content="Visual Style Guide — Web Starter Kit">
    <meta itemprop=description content="Visual style guide used by this site.">
    <link rel=stylesheet href=styles/components.css>
    <title>Visual Style Guide — Web Starter Kit</title>
</head>
<body class=page--styleguide>
<div class=code-sample>
    <section class=styleguide__page-header>
        <div class=page-header>
            <div class=container>
                <h3 class="xxlarge text-divider">Multi-screen layouts</h3>
                <p class="page-header__excerpt g-wide--push-1 g-wide--pull-1">Lorem ipsum dolor sit amet, consectetur
                    adipisicing elit. Natus, optio, ad, voluptates repudiandae at excepturi error delectus explicabo
                    nulla eum provident quibusdam ipsum sapiente culpa sequi quia unde fuga id.</p></div>
        </div>
    </section>
</div>
<script>
    (function () {
        'use strict';

        var snippetToggle = document.querySelector('#snippet-toggle');
        var snippets;

        snippetToggle.addEventListener('click', function () {
            if (snippets) {
                for (var i = 0; i < snippets.length; i++) {
                    snippets[i].classList.toggle('auto-gen-code-visible');
                }
            }
        });

        window.onload = function () {
            createCodeSamples();
            snippets = document.querySelectorAll('.auto-gen-code-snippet');
        };

        function createCodeSamples() {
            var codeWrappers = document.querySelectorAll('.code-sample');

            for (var i = 0; i < codeWrappers.length; i++) {
                var codeWrapper = codeWrappers[i];
                var clonedNodes = getClonedNonTextNodes(codeWrapper);

                beautifyNodes(clonedNodes);

                var preElement = document.createElement('pre');
                var codeElement = document.createElement('code');

                for (var j = 0; j < clonedNodes.length; j++) {
                    codeElement.appendChild(document.createTextNode(clonedNodes[j].outerHTML));

                    if (j + 1 < clonedNodes.length) {
                        codeElement.appendChild(document.createTextNode('\n'));
                    }
                }

                preElement.appendChild(codeElement);
                preElement.classList.add('auto-gen-code-snippet');
                preElement.classList.add('container');

                var clearDiv = document.createElement('div');
                clearDiv.classList.add('clear');

                var parent = codeWrapper.parentNode;

                if (codeWrapper.nextSibling) {
                    parent.insertBefore(preElement, codeWrapper.nextSibling);
                } else {
                    parent.appendChild(preElement);
                }

                parent.insertBefore(clearDiv, preElement);
            }
        }

        function getClonedNonTextNodes(element) {
            var nonTextNodes = [];
            var childNodes = element.childNodes;

            for (var i = 0; i < childNodes.length; i++) {
                var childElement = childNodes[i];

                if (childElement.nodeType !== 3) {
                    // Found a valid child element
                    nonTextNodes.push(childElement.cloneNode(true));
                }
            }

            return nonTextNodes;
        }

        function beautifyNodes(elements) {
            for (var i = 0; i < elements.length; i++) {
                beautifyNode(elements[i], 0);
            }
        }

        function beautifyNode(element, depth) {
            var childNodes = element.childNodes;
            var singleIndent = '    ';
            var currentDepthSpacing = '';

            for (var i = 0; i < depth; i++) {
                currentDepthSpacing += singleIndent;
            }

            var nextDepthSpacing = currentDepthSpacing + singleIndent;

            for (var j = 0; j < childNodes.length; j++) {
                var childElement = childNodes[j];

                if (childElement.nodeType === 3) {
                    // found a text node
                    if (childElement.nodeValue.indexOf('\n') >= 0) {
                        if (j + 1 < childNodes.length) {
                            childElement.nodeValue = '\n' + nextDepthSpacing;
                        } else {
                            childElement.nodeValue = '\n' + currentDepthSpacing;
                        }
                    }
                } else {
                    beautifyNode(childElement, depth + 1);
                }
            }
        }
    })();
</script>
</body>
</html>